@model IEnumerable<JLMCC.Models.Flight> 

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("新建", "Create")
</p>
<p>
    @Html.ActionLink("批量录入(从Excel里粘贴)", "Multi")
</p>



    @if (false)
    {
        <script src="~/Scripts/jquery-3.1.1.min.js"></script>
    }
    @* 日期控件相关引用资源 *@
    <script src="~/Content/widget/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.js"></script>
    <link href="~/Content/widget/bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen" />
    <script src="~/Content/widget/bootstrap-datetimepicker-master/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>

    <script>

       
        //跟据选择的日期刷新页面
        function submitDate() {
           
            var date = $('#d12').val();
            window.location.href = "/Flights?date=" + date;
           
        }

        function submitService(flightid, content) {
           
            $.ajax({
                url: '/Services/CreateServiceByAjax?flightId=' + flightid + '&content=' + content,
                type: "Get",
                async: false,
                datatype: "json",
                success: function (data) {
                    $("#btn_" + flightid).remove();
                    $('<span class="text-center text-success bg-success"></span>').text(data).appendTo($("#td_" + flightid));
                   
                }
            })
        }

        $(document).ready(function () {
            getflight("长春", "arr");

            $("#btn_arrInCGQ").click(function () { $("[name=flightrow][arr=长春]").show(); $("[name=flightrow][arr!=长春]").hide(); });
            $("#TabCGQ").click(function () { getflight("长春", "arr"); $("#ChildTabCGQ li:eq(0) a").tab("show"); });
            $("#btn_depFromCGQ").click(function () { getflight("长春", "dep"); });
            $("#btn_arrInYNJ").click(function () { getflight("延吉", "arr"); });
            $("#btn_depFromYNJ").click(function () { getflight("延吉", "dep"); });
            $("#TabYNJ").click(function () { getflight("延吉", "arr"); $("#ChildTabYNJ li:eq(0) a").tab("show"); });
            $("#btn_arrInNBS").click(function () { getflight("长白山", "arr"); });
            $("#btn_depFromNBS").click(function () { getflight("长白山", "dep"); });
            $("#TabNBS").click(function () { getflight("长白山", "arr"); $("#ChildTabNBS li:eq(0) a").tab("show"); });

          
            //日期控件初始化
            $('#datetimepicker').datetimepicker({
                language: 'zh-CN',
                format: 'yyyy-mm-dd',
                autoclose: true,
                minView: 2,
                todayBtn: true,
                todayHighlight: true


            });
            $('#datetimepickerinput').change(function () {
                var date = $(this).val();
                window.location.href = "/Flights?date=" + date;

            });
        }


     )

        function getflight(city, arrordep) {
            $("[name=flightrow][" + arrordep + "=" + city + "]").show(); $("[name=flightrow][" + arrordep + "!=" + city + "]").hide();
        }

    </script>

    <div class="container">
        <div class="input-group date col-sm-5 " id="datetimepicker" data-date="" data-date-format="yyyy MM dd" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
            <input class="form-control" id="datetimepickerinput" size="16" type="text" value="@ViewBag.Date" readonly>
            <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
        </div>
        <input type="hidden" id="dtp_input2" value="" />
        <br />
        <div class="clear" />
     
        <ul id="myTab" class="nav nav-tabs myNav">
            <li class="active " id="TabCGQ"><a href="#CGQ" data-toggle="tab">长春</a></li>
            <li class="" id="TabYNJ"><a href="#YNJ" data-toggle="tab">延吉</a></li>
            <li class="" id="TabNBS"><a href="#NBS" data-toggle="tab">白山</a></li>

        </ul>
        <div class="panel panel-primary">
            <div class="tab-content">
                <div class="tab-pane   in active " id="CGQ">
                    <ul id="ChildTabCGQ" class="nav nav-pills myNav ">
                        <li class="active  text-center" id="btn_arrInCGQ"><a href="" data-toggle="pill">进港</a></li>
                        <li class=" text-center" id="btn_depFromCGQ"><a href="" data-toggle="pill">出港</a></li>
                    </ul>

                </div>

                <div class="tab-pane  " id="YNJ">
                    <ul id="ChildTabYNJ" class="nav nav-pills myNav">
                        <li class="active text-center" id="btn_arrInYNJ"><a href="" data-toggle="pill">进港</a></li>
                        <li class="text-center" id="btn_depFromYNJ"><a href="" data-toggle="pill">出港</a></li>
                    </ul>
                </div>
                <div class="tab-pane  " id="NBS">
                    <ul id="ChildTabNBS" class="nav nav-pills myNav">
                        <li class="active text-center" id="btn_arrInNBS"><a href="" data-toggle="pill">进港</a></li>
                        <li class="text-center" id="btn_depFromNBS"><a href="" data-toggle="pill">出港</a></li>
                    </ul>
                </div>

            </div>



            <div class="panel-body" id="panelcontent">
                <table id="flighttalbe" class="table">
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.Date)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.FlightNO)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.PlaneNO)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.PlaneType)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.DepartureCity)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.DepartureStandNO)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ScheduleDeparture)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ArriveCity)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ArriveStandNO)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ScheduleArrive)
                        </th>

                      
                        <th></th>
                    </tr>

                    @foreach (var item in Model)
                    {
                        <tr name="flightrow" arr="@item.ArriveCity" dep="@item.DepartureCity">
                            <td>
                                @Html.DisplayFor(modelItem => item.Date)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.FlightNO)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.PlaneNO)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.PlaneType)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.DepartureCity)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.DepartureStandNO)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ScheduleDeparture)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ArriveCity)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ArriveStandNO)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ScheduleArrive)
                            </td>

                            
                            <td>
                                @Html.ActionLink("编辑", "Edit", new { id = item.FlightId }) |
                                @Html.ActionLink("详情", "Details", new { id = item.FlightId }) |
                                @Html.ActionLink("删除", "Delete", new { id = item.FlightId })
                            </td>
                        </tr>
                                    }

                </table>
            </div>
        </div>

    </div>

